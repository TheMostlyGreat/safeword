---
description: USE WHEN in BDD implement phase. RED/GREEN TDD cycle; run /refactor after GREEN.
alwaysApply: false
---

# Phase 6: Implementation (TDD)

**Entry:** `implement` phase

**Iron Law:** NO IMPLEMENTATION UNTIL TEST FAILS FOR THE RIGHT REASON

## Outside-In Test Layering

1. **E2E first** — Prove user-facing behavior works
2. **Integration** — Test component boundaries
3. **Unit** — Test isolated logic

## For Each Scenario: RED → GREEN → REFACTOR

### 6.1 RED - Write Failing Test

1. Pick ONE test (first unchecked `[ ]`)
2. Write test code (from Given/When/Then)
3. Run test → verify fails for RIGHT reason
4. Commit: `test: [scenario name]`

**Red Flags → STOP:**

| Flag                    | Action                     |
| ----------------------- | -------------------------- |
| Test passes immediately | Rewrite - testing nothing  |
| Syntax error            | Fix syntax, not behavior   |
| Wrote implementation    | Delete it, return to test  |

### 6.2 GREEN - Minimal Implementation

1. Write minimal code to pass test
2. Run test → verify passes
3. Run FULL test suite → no regressions
4. Commit: `feat: [scenario name]`

### 6.3 REFACTOR

Run `/refactor` for cleanup after GREEN.

### 6.4 Mark & Iterate

Before marking scenario complete:

1. **Confirm refactor status** (say one of):
   - "Refactored: [what improved]" + show commit
   - "No refactoring needed: code is clean"
2. Mark scenario `[x]` in test-definitions
3. Return to 6.1 for next scenario
4. All done → proceed to Phase 7
